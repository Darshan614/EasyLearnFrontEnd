{"ast":null,"code":"import _slicedToArray from\"D:/CPFE/EasyLearn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classes from\"./Answer.module.css\";import{useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Answer(props){var navigate=useNavigate();var _useState=useState(props.ans.upvotes),_useState2=_slicedToArray(_useState,2),up=_useState2[0],setup=_useState2[1];var _useState3=useState(props.ans.downvotes),_useState4=_slicedToArray(_useState3,2),down=_useState4[0],setdown=_useState4[1];var loggedIn=useSelector(function(state){return state.auth.loggedIn;});console.log(props.ans._id);var like=function like(){if(!loggedIn){navigate(\"/auth\");document.documentElement.scrollTop=0;return;}var token=localStorage.getItem(\"token\");fetch(\"https://easylearn-mhgq.onrender.com/vote\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+token},body:JSON.stringify({subtopicId:props.subtopicId,answerId:props.ans._id,questionId:props.questionId,upvote:true})}).then(function(res){return res.json();}).then(function(data){if(data.message===\"vote done\"){setup(data.upvotes);setdown(data.downvotes);}});};var dislike=function dislike(){if(!loggedIn){navigate(\"/auth\");document.documentElement.scrollTop=0;return;}var token=localStorage.getItem(\"token\");fetch(\"https://easylearn-mhgq.onrender.com/vote\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+token},body:JSON.stringify({subtopicId:props.subtopicId,answerId:props.ans._id,questionId:props.questionId,upvote:false})}).then(function(res){return res.json();}).then(function(data){if(data.message===\"vote done\"){setup(data.upvotes);setdown(data.downvotes);}});};return/*#__PURE__*/_jsxs(\"p\",{className:classes.answer,children:[/*#__PURE__*/_jsx(\"p\",{className:classes.author,children:props.ans.userId!==null?props.ans.userId.username:\"Anonymous\"}),props.ans.answer,/*#__PURE__*/_jsxs(\"span\",{className:classes.dislike,onClick:dislike,children:[/*#__PURE__*/_jsx(\"ion-icon\",{name:\"thumbs-down\"}),down]}),/*#__PURE__*/_jsxs(\"span\",{className:classes.like,onClick:like,children:[up,/*#__PURE__*/_jsx(\"ion-icon\",{name:\"thumbs-up\"})]})]});}export default Answer;","map":{"version":3,"names":["classes","useState","useSelector","useDispatch","useNavigate","jsx","_jsx","jsxs","_jsxs","Answer","props","navigate","_useState","ans","upvotes","_useState2","_slicedToArray","up","setup","_useState3","downvotes","_useState4","down","setdown","loggedIn","state","auth","console","log","_id","like","document","documentElement","scrollTop","token","localStorage","getItem","fetch","method","headers","Authorization","body","JSON","stringify","subtopicId","answerId","questionId","upvote","then","res","json","data","message","dislike","className","answer","children","author","userId","username","onClick","name"],"sources":["D:/CPFE/EasyLearn/src/Components/Answer.js"],"sourcesContent":["import classes from \"./Answer.module.css\";\r\nimport { useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction Answer(props) {\r\n  const navigate = useNavigate();\r\n  const [up, setup] = useState(props.ans.upvotes);\r\n  const [down, setdown] = useState(props.ans.downvotes);\r\n  const loggedIn = useSelector((state) => state.auth.loggedIn);\r\n  console.log(props.ans._id);\r\n  const like = () => {\r\n    if (!loggedIn) {\r\n      navigate(\"/auth\");\r\n      document.documentElement.scrollTop = 0;\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    fetch(\"https://easylearn-mhgq.onrender.com/vote\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        subtopicId: props.subtopicId,\r\n        answerId: props.ans._id,\r\n        questionId: props.questionId,\r\n        upvote: true,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.message === \"vote done\") {\r\n          setup(data.upvotes);\r\n          setdown(data.downvotes);\r\n        }\r\n      });\r\n  };\r\n  const dislike = () => {\r\n    if (!loggedIn) {\r\n      navigate(\"/auth\");\r\n      document.documentElement.scrollTop = 0;\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    fetch(\"https://easylearn-mhgq.onrender.com/vote\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        subtopicId: props.subtopicId,\r\n        answerId: props.ans._id,\r\n        questionId: props.questionId,\r\n        upvote: false,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.message === \"vote done\") {\r\n          setup(data.upvotes);\r\n          setdown(data.downvotes);\r\n        }\r\n      });\r\n  };\r\n  return (\r\n    <p className={classes.answer}>\r\n      <p className={classes.author}>\r\n        {props.ans.userId !== null ? props.ans.userId.username : \"Anonymous\"}\r\n      </p>\r\n      {props.ans.answer}\r\n      <span className={classes.dislike} onClick={dislike}>\r\n        <ion-icon name=\"thumbs-down\"></ion-icon>\r\n        {down}\r\n      </span>\r\n      <span className={classes.like} onClick={like}>\r\n        {up}\r\n        <ion-icon name=\"thumbs-up\"></ion-icon>\r\n      </span>\r\n    </p>\r\n  );\r\n}\r\n\r\nexport default Answer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}