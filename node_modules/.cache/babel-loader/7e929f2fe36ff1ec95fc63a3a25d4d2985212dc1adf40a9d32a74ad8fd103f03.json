{"ast":null,"code":"import _slicedToArray from\"D:/CPFE/EasyLearn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createBrowserRouter,RouterProvider}from\"react-router-dom\";import Home from\"./Pages/Home\";import RootLayout from\"./Pages/RootLayout\";import Loading from\"./Components/UI/Loading\";import Auth from\"./Pages/Auth\";import MyAnswers from\"./Pages/MyAnswers\";import MyQuestions from\"./Pages/MyQuestions\";import Tech from\"./Pages/Tech\";import Topic from\"./Pages/Topic\";import{useEffect,useState}from\"react\";import{authActions}from\"./store/index\";import{useDispatch}from\"react-redux\";import Profile from\"./Pages/Profile\";import{checkAuthLoader}from\"./util/auth\";import Contact from\"./Pages/Contact\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setloading=_useState2[1];var dispatch=useDispatch();useEffect(function(){console.log(\"use effect running\");setloading(true);var token=localStorage.getItem(\"token\");var url2=\"http://localhost:8080/checklogin\";fetch(\"https://easylearn-mhgq.onrender.com/checklogin\",{method:\"GET\",cache:\"no-store\",headers:{Authorization:\"Bearer \"+token}}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.message===\"Some problem in authentication\"){setloading(false);dispatch(authActions.logout());}else if(data.message===\"Invalid token\"){setloading(false);dispatch(authActions.logout());}else if(data.message===\"User is logged in\"){console.log(\"setting the user role\",data.role);setloading(false);dispatch(authActions.login(data.role));}});},[dispatch]);var router=createBrowserRouter([{path:\"/\",element:/*#__PURE__*/_jsx(RootLayout,{}),children:[{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})},{path:\"/auth\",element:/*#__PURE__*/_jsx(Auth,{})},{path:\"/answers\",element:/*#__PURE__*/_jsx(MyAnswers,{}),loader:checkAuthLoader},{path:\"/questions\",element:/*#__PURE__*/_jsx(MyQuestions,{}),loader:checkAuthLoader},{path:\"/technology\",element:/*#__PURE__*/_jsx(Tech,{})},{path:\"/topic\",element:/*#__PURE__*/_jsx(Topic,{})},{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{}),loader:checkAuthLoader},{path:\"/contact\",element:/*#__PURE__*/_jsx(Contact,{})}]}]);return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(RouterProvider,{router:router})});}export default App;","map":{"version":3,"names":["createBrowserRouter","RouterProvider","Home","RootLayout","Loading","Auth","MyAnswers","MyQuestions","Tech","Topic","useEffect","useState","authActions","useDispatch","Profile","checkAuthLoader","Contact","jsx","_jsx","Fragment","_Fragment","App","_useState","_useState2","_slicedToArray","loading","setloading","dispatch","console","log","token","localStorage","getItem","url2","fetch","method","cache","headers","Authorization","then","res","json","data","message","logout","role","login","router","path","element","children","loader"],"sources":["D:/CPFE/EasyLearn/src/App.js"],"sourcesContent":["import { createBrowserRouter, RouterProvider } from \"react-router-dom\";\nimport Home from \"./Pages/Home\";\nimport RootLayout from \"./Pages/RootLayout\";\nimport Loading from \"./Components/UI/Loading\";\nimport Auth from \"./Pages/Auth\";\nimport MyAnswers from \"./Pages/MyAnswers\";\nimport MyQuestions from \"./Pages/MyQuestions\";\nimport Tech from \"./Pages/Tech\";\nimport Topic from \"./Pages/Topic\";\nimport { useEffect, useState } from \"react\";\nimport { authActions } from \"./store/index\";\nimport { useDispatch } from \"react-redux\";\nimport Profile from \"./Pages/Profile\";\nimport { checkAuthLoader } from \"./util/auth\";\nimport Contact from \"./Pages/Contact\";\n\nfunction App() {\n  const [loading, setloading] = useState(false);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    console.log(\"use effect running\");\n    setloading(true);\n    const token = localStorage.getItem(\"token\");\n    const url2 = \"http://localhost:8080/checklogin\";\n    fetch(\"https://easylearn-mhgq.onrender.com/checklogin\", {\n      method: \"GET\",\n      cache: \"no-store\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n      },\n    })\n      .then((res) => {\n        return res.json();\n      })\n      .then((data) => {\n        console.log(data);\n        if (data.message === \"Some problem in authentication\") {\n          setloading(false);\n          dispatch(authActions.logout());\n        } else if (data.message === \"Invalid token\") {\n          setloading(false);\n          dispatch(authActions.logout());\n        } else if (data.message === \"User is logged in\") {\n          console.log(\"setting the user role\", data.role);\n          setloading(false);\n          dispatch(authActions.login(data.role));\n        }\n      });\n  }, [dispatch]);\n  const router = createBrowserRouter([\n    {\n      path: \"/\",\n      element: <RootLayout />,\n      children: [\n        { path: \"/\", element: <Home /> },\n        { path: \"/auth\", element: <Auth /> },\n        { path: \"/answers\", element: <MyAnswers />, loader: checkAuthLoader },\n        {\n          path: \"/questions\",\n          element: <MyQuestions />,\n          loader: checkAuthLoader,\n        },\n        { path: \"/technology\", element: <Tech /> },\n        { path: \"/topic\", element: <Topic /> },\n        { path: \"/profile\", element: <Profile />, loader: checkAuthLoader },\n        {\n          path: \"/contact\",\n          element: <Contact />,\n        },\n      ],\n    },\n  ]);\n  return <>{loading ? <Loading /> : <RouterProvider router={router} />}</>;\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}